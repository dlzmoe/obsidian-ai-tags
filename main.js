/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// main.ts
__export(exports, {
  default: () => AutoTaggerPlugin
});
var import_obsidian = __toModule(require("obsidian"));

// src/errors/RequestError.ts
var RequestError = class extends Error {
  constructor(message, status) {
    super(message);
    this.status = status;
    this.name = "RequestError";
  }
};

// src/services/AIService.ts
var _AIService = class {
  constructor(config) {
    this.config = config;
  }
  makeRequest(url, options) {
    return __async(this, null, function* () {
      var _a;
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), _AIService.TIMEOUT);
      try {
        const response = yield fetch(url, __spreadProps(__spreadValues({}, options), {
          signal: controller.signal
        }));
        if (!response.ok) {
          const error = yield response.json();
          throw new RequestError(((_a = error.error) == null ? void 0 : _a.message) || "\u8BF7\u6C42\u5931\u8D25", response.status);
        }
        return response;
      } catch (error) {
        if (error.name === "AbortError") {
          throw new RequestError("\u8BF7\u6C42\u8D85\u65F6", 408);
        }
        throw error;
      } finally {
        clearTimeout(timeoutId);
      }
    });
  }
  retryRequest(fn) {
    return __async(this, null, function* () {
      let lastError;
      for (let i = 0; i <= _AIService.MAX_RETRIES; i++) {
        try {
          return yield fn();
        } catch (error) {
          lastError = error;
          if (error instanceof RequestError && error.status >= 500) {
            yield new Promise((resolve) => setTimeout(resolve, Math.pow(2, i) * 1e3));
            continue;
          }
          throw error;
        }
      }
      throw lastError;
    });
  }
  generateTags(content) {
    return __async(this, null, function* () {
      const provider = this.getProviderFromUrl();
      const response = yield this.makeRequest(this.getFullApiUrl(provider), {
        method: "POST",
        headers: this.getHeaders(provider),
        body: JSON.stringify(this.getRequestBody(content, provider))
      });
      const data = yield response.json();
      return this.parseResponse(data, provider);
    });
  }
  getProviderFromUrl() {
    if (this.config.apiUrl.includes("generativelanguage.googleapis.com")) {
      return "gemini";
    }
    return "openai";
  }
  getFullApiUrl(provider) {
    if (provider === "gemini") {
      return `${this.config.apiUrl}${this.config.model}:generateContent?key=${this.config.apiKey}`;
    }
    return this.config.apiUrl;
  }
  getHeaders(provider) {
    const headers = {
      "Content-Type": "application/json"
    };
    if (provider !== "gemini" && this.config.apiKey) {
      headers["Authorization"] = `Bearer ${this.config.apiKey}`;
    }
    return headers;
  }
  getRequestBody(content, provider) {
    if (provider === "gemini") {
      return {
        contents: [
          {
            parts: [
              { text: _AIService.SYSTEM_PROMPT },
              { text: content }
            ]
          }
        ]
      };
    }
    return {
      model: this.config.model,
      messages: [
        {
          role: "system",
          content: _AIService.SYSTEM_PROMPT
        },
        {
          role: "user",
          content
        }
      ]
    };
  }
  parseResponse(data, provider) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;
    try {
      let tagsText = "";
      if (provider === "gemini") {
        tagsText = ((_f = (_e = (_d = (_c = (_b = (_a = data.candidates) == null ? void 0 : _a[0]) == null ? void 0 : _b.content) == null ? void 0 : _c.parts) == null ? void 0 : _d[0]) == null ? void 0 : _e.text) == null ? void 0 : _f.trim()) || "";
      } else {
        tagsText = ((_j = (_i = (_h = (_g = data.choices) == null ? void 0 : _g[0]) == null ? void 0 : _h.message) == null ? void 0 : _i.content) == null ? void 0 : _j.trim()) || "";
      }
      return tagsText.split(",").map((tag) => tag.trim()).filter((tag) => tag).map((tag) => tag.replace(/\s+/g, ""));
    } catch (error) {
      throw new Error("\u89E3\u6790 AI \u54CD\u5E94\u5931\u8D25");
    }
  }
};
var AIService = _AIService;
AIService.SYSTEM_PROMPT = "\u4F60\u662F\u4E00\u4E2A\u6587\u6863\u6807\u7B7E\u751F\u6210\u5668\u3002\u8BF7\u6839\u636E\u6587\u6863\u5185\u5BB9\u751F\u6210\u6700\u591A 3 \u4E2A\u76F8\u5173\u7684\u6807\u7B7E\u3002\u53EA\u9700\u8FD4\u56DE\u6807\u7B7E\uFF0C\u7528\u9017\u53F7\u5206\u9694\uFF0C\u4E0D\u8981\u5305\u542B\u5176\u4ED6\u89E3\u91CA\u6216\u8BF4\u660E\uFF0C\u7981\u6B62\u6587\u672C\u4E2D\u5305\u542B\u7A7A\u683C\u3002";
AIService.TIMEOUT = 3e4;
AIService.MAX_RETRIES = 2;

// main.ts
var DEFAULT_SETTINGS = {
  provider: "openai",
  providerSettings: {
    openai: {
      apiKey: "",
      apiUrl: "https://api.openai.com/v1/chat/completions",
      model: "gpt-4o-mini"
    },
    gemini: {
      apiKey: "",
      apiUrl: "https://generativelanguage.googleapis.com/v1beta/models/",
      model: "gemini-1.5-flash"
    },
    claude: {
      apiKey: "",
      apiUrl: "https://api.anthropic.com/v1/messages",
      model: "claude-3-5-sonnet"
    },
    deepseek: {
      apiKey: "",
      apiUrl: "https://api.deepseek.com/v1/chat/completions",
      model: "deepseek-chat"
    },
    volcano: {
      apiKey: "",
      apiUrl: "https://ark.cn-beijing.volces.com/api/v3/chat/completions",
      model: ""
    }
  }
};
var PROVIDER_CONFIGS = {
  openai: {
    defaultUrl: "https://api.openai.com/v1/chat/completions",
    defaultModel: "gpt-4o-mini",
    models: ["gpt-4o-mini", "gpt-4o", "gpt-3.5-turbo"]
  },
  gemini: {
    defaultUrl: "https://generativelanguage.googleapis.com/v1beta/models/",
    defaultModel: "gemini-1.5-flash",
    models: ["gemini-1.5-flash", "gemini-2.0-flash"]
  },
  claude: {
    defaultUrl: "https://api.anthropic.com/v1/messages",
    defaultModel: "claude-3-5-sonnet",
    models: ["claude-3-5-sonnet", "claude-3-7-sonnet", "claude-3-opus", "claude-3-haiku"]
  },
  deepseek: {
    defaultUrl: "https://api.deepseek.com/v1/chat/completions",
    defaultModel: "deepseek-chat",
    models: ["deepseek-chat", "deepseek-coder"]
  },
  volcano: {
    defaultUrl: "https://ark.cn-beijing.volces.com/api/v3/chat/completions",
    defaultModel: "",
    models: [""]
  }
};
var AutoTaggerPlugin = class extends import_obsidian.Plugin {
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.addRibbonIcon("tag", "\u751F\u6210\u6807\u7B7E", () => __async(this, null, function* () {
        yield this.generateTags();
      }));
      this.addSettingTab(new AutoTaggerSettingTab(this.app, this));
    });
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  generateTags() {
    return __async(this, null, function* () {
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
      if (!activeView) {
        new import_obsidian.Notice("\u8BF7\u6253\u5F00\u4E00\u4E2A\u6587\u6863\u4EE5\u751F\u6210\u6807\u7B7E");
        return;
      }
      const file = activeView.file;
      const content = yield this.app.vault.read(file);
      const loadingNotice = new import_obsidian.Notice("\u6B63\u5728\u751F\u6210\u6807\u7B7E...", 0);
      try {
        const tags = yield this.analyzeTags(content);
        loadingNotice.hide();
        new TagSelectionModal(this.app, tags, (selectedTags) => __async(this, null, function* () {
          yield this.updateFileFrontMatter(file, selectedTags);
        })).open();
      } catch (error) {
        loadingNotice.hide();
        new import_obsidian.Notice(`\u751F\u6210\u6807\u7B7E\u5931\u8D25\uFF1A${error.message}`);
      }
    });
  }
  analyzeTags(content) {
    return __async(this, null, function* () {
      const currentProvider = this.settings.provider;
      const providerConfig = this.settings.providerSettings[currentProvider];
      if (!providerConfig || !providerConfig.apiKey) {
        throw new Error("\u8BF7\u5148\u5728\u8BBE\u7F6E\u4E2D\u914D\u7F6E API \u5BC6\u94A5");
      }
      const config = {
        apiKey: providerConfig.apiKey,
        apiUrl: providerConfig.apiUrl,
        model: providerConfig.model
      };
      const aiService = new AIService(config);
      try {
        return yield aiService.generateTags(content);
      } catch (error) {
        throw new Error(`\u751F\u6210\u6807\u7B7E\u5931\u8D25\uFF1A${error.message}`);
      }
    });
  }
  updateFileFrontMatter(file, newTags) {
    return __async(this, null, function* () {
      const content = yield this.app.vault.read(file);
      const yamlRegex = /^---\n([\s\S]*?)\n---/;
      const hasYaml = yamlRegex.test(content);
      let newContent;
      if (hasYaml) {
        const yamlMatch = content.match(yamlRegex);
        const yaml = yamlMatch[1];
        const tagsRegex = /^tags:\s*\[(.*)\]/m;
        const tagsMatch = yaml.match(tagsRegex);
        if (tagsMatch) {
          const existingTagsStr = tagsMatch[1];
          const existingTags = existingTagsStr.split(",").map((tag) => tag.trim()).filter((tag) => tag !== "");
          const allTags = [...new Set([...existingTags, ...newTags])];
          newContent = content.replace(tagsRegex, `tags: [${allTags.join(", ")}]`);
        } else {
          newContent = content.replace(yamlRegex, `---
${yaml}
tags: [${newTags.join(", ")}]
---`);
        }
      } else {
        newContent = `---
tags: [${newTags.join(", ")}]
---

${content}`;
      }
      yield this.app.vault.modify(file, newContent);
      new import_obsidian.Notice(`\u5DF2\u6210\u529F\u6DFB\u52A0\u6807\u7B7E\uFF1A${newTags.join(", ")}`);
    });
  }
};
var TagSelectionModal = class extends import_obsidian.Modal {
  constructor(app, tags, onSubmit) {
    super(app);
    this.tags = tags;
    this.onSubmit = onSubmit;
    this.selectedTags = [...tags];
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", { text: "\u63A8\u8350\u6807\u7B7E" });
    const tagContainer = contentEl.createDiv({ cls: "tag-container" });
    this.tags.forEach((tag, index) => {
      const tagRow = tagContainer.createDiv({ cls: "tag-row" });
      const checkbox = tagRow.createEl("input", {
        type: "checkbox",
        attr: { checked: true }
      });
      const tagInput = tagRow.createEl("input", {
        type: "text",
        value: tag
      });
      checkbox.addEventListener("change", () => {
        if (checkbox.checked) {
          this.selectedTags[index] = tagInput.value;
        } else {
          this.selectedTags[index] = null;
        }
      });
      tagInput.addEventListener("input", () => {
        if (checkbox.checked) {
          this.selectedTags[index] = tagInput.value;
        }
      });
    });
    const buttonContainer = contentEl.createDiv({ cls: "button-container" });
    buttonContainer.createEl("button", { text: "\u53D6\u6D88" }).addEventListener("click", () => {
      this.close();
    });
    buttonContainer.createEl("button", { text: "\u786E\u5B9A" }).addEventListener("click", () => {
      const finalTags = this.selectedTags.filter((tag) => tag !== null);
      this.onSubmit(finalTags);
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var AutoTaggerSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h3", { text: "\u81EA\u52A8\u6807\u7B7E\u751F\u6210\u8BBE\u7F6E" });
    const providerDescriptions = {
      openai: [
        "OpenAI",
        "\u2022 API \u5730\u5740\uFF1Ahttps://api.openai.com/v1/chat/completions",
        "\u2022 \u652F\u6301\u6A21\u578B\uFF1Agpt-4o-mini, gpt-4o, gpt-3.5-turbo"
      ],
      gemini: [
        "Gemini",
        "\u2022 API \u5730\u5740\uFF1Ahttps://generativelanguage.googleapis.com/v1beta/models/<MODEL_NAME>/generateContent",
        "\u2022 \u652F\u6301\u6A21\u578B\uFF1Agemini-1.5-flash, gemini-2.0-flash"
      ],
      claude: [
        "Claude",
        "\u2022 API \u5730\u5740\uFF1Ahttps://api.anthropic.com/v1/messages",
        "\u2022 \u652F\u6301\u6A21\u578B\uFF1Aclaude-3-5-sonnet, claude-3-7-sonnet, claude-3-opus, claude-3-haiku"
      ],
      deepseek: [
        "DeepSeek - \u6DF1\u5EA6\u6C42\u7D22",
        "\u2022 API \u5730\u5740\uFF1Ahttps://api.deepseek.com/v1/chat/completions",
        "\u2022 \u652F\u6301\u6A21\u578B\uFF1Adeepseek-chat, deepseek-coder"
      ],
      volcano: [
        "DeepSeek - \u706B\u5C71\u5F15\u64CE",
        "\u2022 API \u5730\u5740\uFF1Ahttps://ark.cn-beijing.volces.com/api/v3/chat/completions",
        "\u2022 \u6CE8\u610F\uFF1A\u9700\u8981\u5728\u8BF7\u6C42 URL \u4E2D\u6DFB\u52A0\u6A21\u578B\u670D\u52A1\u540D\u79F0"
      ]
    };
    const showProviderInfo = (provider) => {
      const providerSection = containerEl.querySelector(".provider-section");
      if (providerSection) {
        providerSection.remove();
      }
      const section = containerEl.createDiv({ cls: "provider-section" });
      const providerInfo = section.createDiv({ cls: "provider-info" });
      providerDescriptions[provider].forEach((text) => {
        providerInfo.createEl("p", { text });
      });
    };
    showProviderInfo(this.plugin.settings.provider);
    new import_obsidian.Setting(containerEl).setName("AI \u63D0\u4F9B\u5546").setDesc("\u9009\u62E9 AI \u670D\u52A1\u63D0\u4F9B\u5546").addDropdown((dropdown) => {
      Object.keys(PROVIDER_CONFIGS).forEach((provider) => {
        dropdown.addOption(provider, provider === "openai" ? "OpenAI" : provider === "gemini" ? "Gemini" : provider === "claude" ? "Claude\uFF08\u6D4B\u8BD5\u4E2D\uFF09" : provider === "deepseek" ? "DeepSeek - \u6DF1\u5EA6\u6C42\u7D22" : "DeepSeek - \u706B\u5C71\u5F15\u64CE");
      });
      dropdown.setValue(this.plugin.settings.provider);
      dropdown.onChange((value) => __async(this, null, function* () {
        this.plugin.settings.provider = value;
        if (!this.plugin.settings.providerSettings[value].apiUrl) {
          this.plugin.settings.providerSettings[value].apiUrl = PROVIDER_CONFIGS[value].defaultUrl;
        }
        if (!this.plugin.settings.providerSettings[value].model) {
          this.plugin.settings.providerSettings[value].model = PROVIDER_CONFIGS[value].defaultModel;
        }
        yield this.plugin.saveSettings();
        showProviderInfo(value);
        this.display();
      }));
    });
    new import_obsidian.Setting(containerEl).setName("API \u5BC6\u94A5").setDesc("\u8F93\u5165\u4F60\u7684 API \u5BC6\u94A5").addText((text) => text.setPlaceholder("\u8BF7\u8F93\u5165 API \u5BC6\u94A5").setValue(this.plugin.settings.providerSettings[this.plugin.settings.provider].apiKey).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.providerSettings[this.plugin.settings.provider].apiKey = value;
      yield this.plugin.saveSettings();
    })));
    new import_obsidian.Setting(containerEl).setName("API \u5730\u5740").setDesc("\u8F93\u5165 API \u5730\u5740").addText((text) => text.setPlaceholder(PROVIDER_CONFIGS[this.plugin.settings.provider].defaultUrl).setValue(this.plugin.settings.providerSettings[this.plugin.settings.provider].apiUrl).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.providerSettings[this.plugin.settings.provider].apiUrl = value;
      yield this.plugin.saveSettings();
    })));
    if (this.plugin.settings.provider === "gemini") {
      containerEl.createEl("div", {
        text: "\u6CE8\u610F\uFF1AGemini API URL \u5E94\u4EE5 https://generativelanguage.googleapis.com/v1beta/models/ \u5F00\u5934\uFF0C\u6A21\u578B\u540D\u79F0\u5C06\u81EA\u52A8\u6DFB\u52A0\u3002",
        cls: "setting-item-description"
      });
    } else if (this.plugin.settings.provider === "volcano") {
      containerEl.createEl("div", {
        text: "\u6CE8\u610F\uFF1A\u706B\u5C71\u5F15\u64CE API URL \u5E94\u4EE5 https://ark.cn-beijing.volces.com/api/v3/chat/completions \u5F00\u5934\uFF0C\u6A21\u578B\u670D\u52A1\u540D\u79F0\u5C06\u81EA\u52A8\u6DFB\u52A0\u3002",
        cls: "setting-item-description"
      });
    }
    new import_obsidian.Setting(containerEl).setName("\u6A21\u578B").setDesc("\u9009\u62E9 AI \u6A21\u578B").addDropdown((dropdown) => {
      const models = PROVIDER_CONFIGS[this.plugin.settings.provider].models;
      models.forEach((model) => {
        dropdown.addOption(model, model);
      });
      if (!models.includes(this.plugin.settings.model)) {
        dropdown.addOption(this.plugin.settings.model, this.plugin.settings.model);
      }
      dropdown.setValue(this.plugin.settings.providerSettings[this.plugin.settings.provider].model);
      dropdown.onChange((value) => __async(this, null, function* () {
        this.plugin.settings.providerSettings[this.plugin.settings.provider].model = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian.Setting(containerEl).setName("\u81EA\u5B9A\u4E49\u6A21\u578B").setDesc("\u8F93\u5165\u81EA\u5B9A\u4E49\u6A21\u578B\u540D\u79F0 (\u53EF\u9009)").addText((text) => text.setPlaceholder("\u81EA\u5B9A\u4E49\u6A21\u578B\u540D\u79F0").setValue(this.plugin.settings.providerSettings[this.plugin.settings.provider].model).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.providerSettings[this.plugin.settings.provider].model = value;
      yield this.plugin.saveSettings();
      this.display();
    })));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvZXJyb3JzL1JlcXVlc3RFcnJvci50cyIsICJzcmMvc2VydmljZXMvQUlTZXJ2aWNlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgVEZpbGUsIE5vdGljZSwgTW9kYWwsIE1hcmtkb3duVmlldywgRHJvcGRvd25Db21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbXBvcnQgeyBBSVNlcnZpY2UsIEFJU2VydmljZUNvbmZpZyB9IGZyb20gJy4vc3JjL3NlcnZpY2VzL0FJU2VydmljZSc7XHJcblxyXG5pbnRlcmZhY2UgUHJvdmlkZXJTZXR0aW5ncyB7XHJcblx0YXBpS2V5OiBzdHJpbmc7XHJcblx0YXBpVXJsOiBzdHJpbmc7XHJcblx0bW9kZWw6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIEF1dG9UYWdnZXJTZXR0aW5ncyB7XHJcblx0cHJvdmlkZXI6IHN0cmluZztcclxuXHRwcm92aWRlclNldHRpbmdzOiBSZWNvcmQ8c3RyaW5nLCBQcm92aWRlclNldHRpbmdzPjtcclxufVxyXG5cclxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogQXV0b1RhZ2dlclNldHRpbmdzID0ge1xyXG5cdHByb3ZpZGVyOiAnb3BlbmFpJyxcclxuXHRwcm92aWRlclNldHRpbmdzOiB7XHJcblx0XHRvcGVuYWk6IHtcclxuXHRcdFx0YXBpS2V5OiAnJyxcclxuXHRcdFx0YXBpVXJsOiAnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJyxcclxuXHRcdFx0bW9kZWw6ICdncHQtNG8tbWluaSdcclxuXHRcdH0sXHJcblx0XHRnZW1pbmk6IHtcclxuXHRcdFx0YXBpS2V5OiAnJyxcclxuXHRcdFx0YXBpVXJsOiAnaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy8nLFxyXG5cdFx0XHRtb2RlbDogJ2dlbWluaS0xLjUtZmxhc2gnXHJcblx0XHR9LFxyXG5cdFx0Y2xhdWRlOiB7XHJcblx0XHRcdGFwaUtleTogJycsXHJcblx0XHRcdGFwaVVybDogJ2h0dHBzOi8vYXBpLmFudGhyb3BpYy5jb20vdjEvbWVzc2FnZXMnLFxyXG5cdFx0XHRtb2RlbDogJ2NsYXVkZS0zLTUtc29ubmV0J1xyXG5cdFx0fSxcclxuXHRcdGRlZXBzZWVrOiB7XHJcblx0XHRcdGFwaUtleTogJycsXHJcblx0XHRcdGFwaVVybDogJ2h0dHBzOi8vYXBpLmRlZXBzZWVrLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJyxcclxuXHRcdFx0bW9kZWw6ICdkZWVwc2Vlay1jaGF0J1xyXG5cdFx0fSxcclxuXHRcdHZvbGNhbm86IHtcclxuXHRcdFx0YXBpS2V5OiAnJyxcclxuXHRcdFx0YXBpVXJsOiAnaHR0cHM6Ly9hcmsuY24tYmVpamluZy52b2xjZXMuY29tL2FwaS92My9jaGF0L2NvbXBsZXRpb25zJyxcclxuXHRcdFx0bW9kZWw6ICcnXHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5jb25zdCBQUk9WSURFUl9DT05GSUdTID0ge1xyXG5cdG9wZW5haToge1xyXG5cdFx0ZGVmYXVsdFVybDogJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsXHJcblx0XHRkZWZhdWx0TW9kZWw6ICdncHQtNG8tbWluaScsXHJcblx0XHRtb2RlbHM6IFsnZ3B0LTRvLW1pbmknLCAnZ3B0LTRvJywgJ2dwdC0zLjUtdHVyYm8nXVxyXG5cdH0sXHJcblx0Z2VtaW5pOiB7XHJcblx0XHRkZWZhdWx0VXJsOiAnaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy8nLFxyXG5cdFx0ZGVmYXVsdE1vZGVsOiAnZ2VtaW5pLTEuNS1mbGFzaCcsXHJcblx0XHRtb2RlbHM6IFsnZ2VtaW5pLTEuNS1mbGFzaCcsICdnZW1pbmktMi4wLWZsYXNoJ11cclxuXHR9LFxyXG5cdGNsYXVkZToge1xyXG5cdFx0ZGVmYXVsdFVybDogJ2h0dHBzOi8vYXBpLmFudGhyb3BpYy5jb20vdjEvbWVzc2FnZXMnLFxyXG5cdFx0ZGVmYXVsdE1vZGVsOiAnY2xhdWRlLTMtNS1zb25uZXQnLFxyXG5cdFx0bW9kZWxzOiBbJ2NsYXVkZS0zLTUtc29ubmV0JywgJ2NsYXVkZS0zLTctc29ubmV0JywgJ2NsYXVkZS0zLW9wdXMnLCAnY2xhdWRlLTMtaGFpa3UnXVxyXG5cdH0sXHJcblx0ZGVlcHNlZWs6IHtcclxuXHRcdGRlZmF1bHRVcmw6ICdodHRwczovL2FwaS5kZWVwc2Vlay5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsXHJcblx0XHRkZWZhdWx0TW9kZWw6ICdkZWVwc2Vlay1jaGF0JyxcclxuXHRcdG1vZGVsczogWydkZWVwc2Vlay1jaGF0JywgJ2RlZXBzZWVrLWNvZGVyJ11cclxuXHR9LFxyXG5cdHZvbGNhbm86IHtcclxuXHRcdGRlZmF1bHRVcmw6ICdodHRwczovL2Fyay5jbi1iZWlqaW5nLnZvbGNlcy5jb20vYXBpL3YzL2NoYXQvY29tcGxldGlvbnMnLFxyXG5cdFx0ZGVmYXVsdE1vZGVsOiAnJyxcclxuXHRcdG1vZGVsczogWycnXVxyXG5cdH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dG9UYWdnZXJQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBBdXRvVGFnZ2VyU2V0dGluZ3M7XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0dGhpcy5hZGRSaWJib25JY29uKCd0YWcnLCAnXHU3NTFGXHU2MjEwXHU2ODA3XHU3QjdFJywgYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmdlbmVyYXRlVGFncygpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBBdXRvVGFnZ2VyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2VuZXJhdGVUYWdzKCkge1xyXG5cdFx0Y29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcblx0XHRpZiAoIWFjdGl2ZVZpZXcpIHtcclxuXHRcdFx0bmV3IE5vdGljZSgnXHU4QkY3XHU2MjUzXHU1RjAwXHU0RTAwXHU0RTJBXHU2NTg3XHU2ODYzXHU0RUU1XHU3NTFGXHU2MjEwXHU2ODA3XHU3QjdFJyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBmaWxlID0gYWN0aXZlVmlldy5maWxlO1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcblxyXG5cdFx0Y29uc3QgbG9hZGluZ05vdGljZSA9IG5ldyBOb3RpY2UoJ1x1NkI2M1x1NTcyOFx1NzUxRlx1NjIxMFx1NjgwN1x1N0I3RS4uLicsIDApO1xyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHRhZ3MgPSBhd2FpdCB0aGlzLmFuYWx5emVUYWdzKGNvbnRlbnQpO1xyXG5cdFx0XHRsb2FkaW5nTm90aWNlLmhpZGUoKTtcclxuXHJcblx0XHRcdG5ldyBUYWdTZWxlY3Rpb25Nb2RhbCh0aGlzLmFwcCwgdGFncywgYXN5bmMgKHNlbGVjdGVkVGFncykgPT4ge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMudXBkYXRlRmlsZUZyb250TWF0dGVyKGZpbGUsIHNlbGVjdGVkVGFncyk7XHJcblx0XHRcdH0pLm9wZW4oKTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGxvYWRpbmdOb3RpY2UuaGlkZSgpO1xyXG5cdFx0XHRuZXcgTm90aWNlKGBcdTc1MUZcdTYyMTBcdTY4MDdcdTdCN0VcdTU5MzFcdThEMjVcdUZGMUEke2Vycm9yLm1lc3NhZ2V9YCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBhbmFseXplVGFncyhjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcblx0XHRjb25zdCBjdXJyZW50UHJvdmlkZXIgPSB0aGlzLnNldHRpbmdzLnByb3ZpZGVyO1xyXG5cdFx0Y29uc3QgcHJvdmlkZXJDb25maWcgPSB0aGlzLnNldHRpbmdzLnByb3ZpZGVyU2V0dGluZ3NbY3VycmVudFByb3ZpZGVyXTtcclxuXHJcblx0XHRpZiAoIXByb3ZpZGVyQ29uZmlnIHx8ICFwcm92aWRlckNvbmZpZy5hcGlLZXkpIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdcdThCRjdcdTUxNDhcdTU3MjhcdThCQkVcdTdGNkVcdTRFMkRcdTkxNERcdTdGNkUgQVBJIFx1NUJDNlx1OTRBNScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGNvbmZpZzogQUlTZXJ2aWNlQ29uZmlnID0ge1xyXG5cdFx0XHRhcGlLZXk6IHByb3ZpZGVyQ29uZmlnLmFwaUtleSxcclxuXHRcdFx0YXBpVXJsOiBwcm92aWRlckNvbmZpZy5hcGlVcmwsXHJcblx0XHRcdG1vZGVsOiBwcm92aWRlckNvbmZpZy5tb2RlbFxyXG5cdFx0fTtcclxuXHJcblx0XHRjb25zdCBhaVNlcnZpY2UgPSBuZXcgQUlTZXJ2aWNlKGNvbmZpZyk7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRyZXR1cm4gYXdhaXQgYWlTZXJ2aWNlLmdlbmVyYXRlVGFncyhjb250ZW50KTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcihgXHU3NTFGXHU2MjEwXHU2ODA3XHU3QjdFXHU1OTMxXHU4RDI1XHVGRjFBJHtlcnJvci5tZXNzYWdlfWApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgdXBkYXRlRmlsZUZyb250TWF0dGVyKGZpbGU6IFRGaWxlLCBuZXdUYWdzOiBzdHJpbmdbXSkge1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcblxyXG5cdFx0Y29uc3QgeWFtbFJlZ2V4ID0gL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vO1xyXG5cdFx0Y29uc3QgaGFzWWFtbCA9IHlhbWxSZWdleC50ZXN0KGNvbnRlbnQpO1xyXG5cclxuXHRcdGxldCBuZXdDb250ZW50O1xyXG5cdFx0aWYgKGhhc1lhbWwpIHtcclxuXHRcdFx0Y29uc3QgeWFtbE1hdGNoID0gY29udGVudC5tYXRjaCh5YW1sUmVnZXgpO1xyXG5cdFx0XHRjb25zdCB5YW1sID0geWFtbE1hdGNoWzFdO1xyXG5cdFx0XHRjb25zdCB0YWdzUmVnZXggPSAvXnRhZ3M6XFxzKlxcWyguKilcXF0vbTtcclxuXHRcdFx0Y29uc3QgdGFnc01hdGNoID0geWFtbC5tYXRjaCh0YWdzUmVnZXgpO1xyXG5cclxuXHRcdFx0aWYgKHRhZ3NNYXRjaCkge1xyXG5cdFx0XHRcdGNvbnN0IGV4aXN0aW5nVGFnc1N0ciA9IHRhZ3NNYXRjaFsxXTtcclxuXHRcdFx0XHRjb25zdCBleGlzdGluZ1RhZ3MgPSBleGlzdGluZ1RhZ3NTdHJcclxuXHRcdFx0XHRcdC5zcGxpdCgnLCcpXHJcblx0XHRcdFx0XHQubWFwKHRhZyA9PiB0YWcudHJpbSgpKVxyXG5cdFx0XHRcdFx0LmZpbHRlcih0YWcgPT4gdGFnICE9PSAnJyk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGFsbFRhZ3MgPSBbLi4ubmV3IFNldChbLi4uZXhpc3RpbmdUYWdzLCAuLi5uZXdUYWdzXSldO1xyXG5cclxuXHRcdFx0XHRuZXdDb250ZW50ID0gY29udGVudC5yZXBsYWNlKHRhZ3NSZWdleCwgYHRhZ3M6IFske2FsbFRhZ3Muam9pbignLCAnKX1dYCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bmV3Q29udGVudCA9IGNvbnRlbnQucmVwbGFjZSh5YW1sUmVnZXgsIGAtLS1cXG4ke3lhbWx9XFxudGFnczogWyR7bmV3VGFncy5qb2luKCcsICcpfV1cXG4tLS1gKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bmV3Q29udGVudCA9IGAtLS1cXG50YWdzOiBbJHtuZXdUYWdzLmpvaW4oJywgJyl9XVxcbi0tLVxcblxcbiR7Y29udGVudH1gO1xyXG5cdFx0fVxyXG5cclxuXHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50KTtcclxuXHRcdG5ldyBOb3RpY2UoYFx1NURGMlx1NjIxMFx1NTI5Rlx1NkRGQlx1NTJBMFx1NjgwN1x1N0I3RVx1RkYxQSR7bmV3VGFncy5qb2luKCcsICcpfWApO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgVGFnU2VsZWN0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0dGFnczogc3RyaW5nW107XHJcblx0b25TdWJtaXQ6ICh0YWdzOiBzdHJpbmdbXSkgPT4gdm9pZDtcclxuXHRzZWxlY3RlZFRhZ3M6IHN0cmluZ1tdO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGFnczogc3RyaW5nW10sIG9uU3VibWl0OiAodGFnczogc3RyaW5nW10pID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnRhZ3MgPSB0YWdzO1xyXG5cdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xyXG5cdFx0dGhpcy5zZWxlY3RlZFRhZ3MgPSBbLi4udGFnc107XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHU2M0E4XHU4MzUwXHU2ODA3XHU3QjdFJyB9KTtcclxuXHJcblx0XHRjb25zdCB0YWdDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAndGFnLWNvbnRhaW5lcicgfSk7XHJcblxyXG5cdFx0dGhpcy50YWdzLmZvckVhY2goKHRhZywgaW5kZXgpID0+IHtcclxuXHRcdFx0Y29uc3QgdGFnUm93ID0gdGFnQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3RhZy1yb3cnIH0pO1xyXG5cclxuXHRcdFx0Y29uc3QgY2hlY2tib3ggPSB0YWdSb3cuY3JlYXRlRWwoJ2lucHV0Jywge1xyXG5cdFx0XHRcdHR5cGU6ICdjaGVja2JveCcsXHJcblx0XHRcdFx0YXR0cjogeyBjaGVja2VkOiB0cnVlIH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRjb25zdCB0YWdJbnB1dCA9IHRhZ1Jvdy5jcmVhdGVFbCgnaW5wdXQnLCB7XHJcblx0XHRcdFx0dHlwZTogJ3RleHQnLFxyXG5cdFx0XHRcdHZhbHVlOiB0YWdcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XHJcblx0XHRcdFx0aWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcclxuXHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRUYWdzW2luZGV4XSA9IHRhZ0lucHV0LnZhbHVlO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkVGFnc1tpbmRleF0gPSBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0YWdJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuXHRcdFx0XHRpZiAoY2hlY2tib3guY2hlY2tlZCkge1xyXG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZFRhZ3NbaW5kZXhdID0gdGFnSW5wdXQudmFsdWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdidXR0b24tY29udGFpbmVyJyB9KTtcclxuXHJcblx0XHRidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1NTNENlx1NkQ4OCcgfSkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHU3ODZFXHU1QjlBJyB9KS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0Y29uc3QgZmluYWxUYWdzID0gdGhpcy5zZWxlY3RlZFRhZ3MuZmlsdGVyKHRhZyA9PiB0YWcgIT09IG51bGwpO1xyXG5cdFx0XHR0aGlzLm9uU3VibWl0KGZpbmFsVGFncyk7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBBdXRvVGFnZ2VyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogQXV0b1RhZ2dlclBsdWdpbjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogQXV0b1RhZ2dlclBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHU4MUVBXHU1MkE4XHU2ODA3XHU3QjdFXHU3NTFGXHU2MjEwXHU4QkJFXHU3RjZFJyB9KTtcclxuXHJcblx0XHQvLyBcdTZERkJcdTUyQTBcdTYzRDBcdTRGOUJcdTU1NDZcdThCRjRcdTY2MEVcclxuXHRcdGNvbnN0IHByb3ZpZGVyRGVzY3JpcHRpb25zID0ge1xyXG5cdFx0XHRvcGVuYWk6IFtcclxuXHRcdFx0XHQnT3BlbkFJJyxcclxuXHRcdFx0XHQnXHUyMDIyIEFQSSBcdTU3MzBcdTU3NDBcdUZGMUFodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL2NoYXQvY29tcGxldGlvbnMnLFxyXG5cdFx0XHRcdCdcdTIwMjIgXHU2NTJGXHU2MzAxXHU2QTIxXHU1NzhCXHVGRjFBZ3B0LTRvLW1pbmksIGdwdC00bywgZ3B0LTMuNS10dXJibydcclxuXHRcdFx0XSxcclxuXHRcdFx0Z2VtaW5pOiBbXHJcblx0XHRcdFx0J0dlbWluaScsXHJcblx0XHRcdFx0J1x1MjAyMiBBUEkgXHU1NzMwXHU1NzQwXHVGRjFBaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy88TU9ERUxfTkFNRT4vZ2VuZXJhdGVDb250ZW50JyxcclxuXHRcdFx0XHQnXHUyMDIyIFx1NjUyRlx1NjMwMVx1NkEyMVx1NTc4Qlx1RkYxQWdlbWluaS0xLjUtZmxhc2gsIGdlbWluaS0yLjAtZmxhc2gnXHJcblx0XHRcdF0sXHJcblx0XHRcdGNsYXVkZTogW1xyXG5cdFx0XHRcdCdDbGF1ZGUnLFxyXG5cdFx0XHRcdCdcdTIwMjIgQVBJIFx1NTczMFx1NTc0MFx1RkYxQWh0dHBzOi8vYXBpLmFudGhyb3BpYy5jb20vdjEvbWVzc2FnZXMnLFxyXG5cdFx0XHRcdCdcdTIwMjIgXHU2NTJGXHU2MzAxXHU2QTIxXHU1NzhCXHVGRjFBY2xhdWRlLTMtNS1zb25uZXQsIGNsYXVkZS0zLTctc29ubmV0LCBjbGF1ZGUtMy1vcHVzLCBjbGF1ZGUtMy1oYWlrdSdcclxuXHRcdFx0XSxcclxuXHRcdFx0ZGVlcHNlZWs6IFtcclxuXHRcdFx0XHQnRGVlcFNlZWsgLSBcdTZERjFcdTVFQTZcdTZDNDJcdTdEMjInLFxyXG5cdFx0XHRcdCdcdTIwMjIgQVBJIFx1NTczMFx1NTc0MFx1RkYxQWh0dHBzOi8vYXBpLmRlZXBzZWVrLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJyxcclxuXHRcdFx0XHQnXHUyMDIyIFx1NjUyRlx1NjMwMVx1NkEyMVx1NTc4Qlx1RkYxQWRlZXBzZWVrLWNoYXQsIGRlZXBzZWVrLWNvZGVyJ1xyXG5cdFx0XHRdLFxyXG5cdFx0XHR2b2xjYW5vOiBbXHJcblx0XHRcdFx0J0RlZXBTZWVrIC0gXHU3MDZCXHU1QzcxXHU1RjE1XHU2NENFJyxcclxuXHRcdFx0XHQnXHUyMDIyIEFQSSBcdTU3MzBcdTU3NDBcdUZGMUFodHRwczovL2Fyay5jbi1iZWlqaW5nLnZvbGNlcy5jb20vYXBpL3YzL2NoYXQvY29tcGxldGlvbnMnLFxyXG5cdFx0XHRcdCdcdTIwMjIgXHU2Q0U4XHU2MTBGXHVGRjFBXHU5NzAwXHU4OTgxXHU1NzI4XHU4QkY3XHU2QzQyIFVSTCBcdTRFMkRcdTZERkJcdTUyQTBcdTZBMjFcdTU3OEJcdTY3MERcdTUyQTFcdTU0MERcdTc5RjAnXHJcblx0XHRcdF1cclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3Qgc2hvd1Byb3ZpZGVySW5mbyA9IChwcm92aWRlcjogc3RyaW5nKSA9PiB7XHJcblx0XHRcdGNvbnN0IHByb3ZpZGVyU2VjdGlvbiA9IGNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5wcm92aWRlci1zZWN0aW9uJyk7XHJcblx0XHRcdGlmIChwcm92aWRlclNlY3Rpb24pIHtcclxuXHRcdFx0XHRwcm92aWRlclNlY3Rpb24ucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IHNlY3Rpb24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdwcm92aWRlci1zZWN0aW9uJyB9KTtcclxuXHRcdFx0Y29uc3QgcHJvdmlkZXJJbmZvID0gc2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdwcm92aWRlci1pbmZvJyB9KTtcclxuXHJcblx0XHRcdHByb3ZpZGVyRGVzY3JpcHRpb25zW3Byb3ZpZGVyXS5mb3JFYWNoKHRleHQgPT4ge1xyXG5cdFx0XHRcdHByb3ZpZGVySW5mby5jcmVhdGVFbCgncCcsIHsgdGV4dCB9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFx1NjYzRVx1NzkzQVx1NUY1M1x1NTI0RFx1OTAwOVx1NjJFOVx1NzY4NFx1NjNEMFx1NEY5Qlx1NTU0Nlx1NEZFMVx1NjA2RlxyXG5cdFx0c2hvd1Byb3ZpZGVySW5mbyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlcik7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdBSSBcdTYzRDBcdTRGOUJcdTU1NDYnKVxyXG5cdFx0XHQuc2V0RGVzYygnXHU5MDA5XHU2MkU5IEFJIFx1NjcwRFx1NTJBMVx1NjNEMFx1NEY5Qlx1NTU0NicpXHJcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcblx0XHRcdFx0T2JqZWN0LmtleXMoUFJPVklERVJfQ09ORklHUykuZm9yRWFjaChwcm92aWRlciA9PiB7XHJcblx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24ocHJvdmlkZXIsIHByb3ZpZGVyID09PSAnb3BlbmFpJyA/ICdPcGVuQUknIDogXHJcblx0XHRcdFx0XHRcdHByb3ZpZGVyID09PSAnZ2VtaW5pJyA/ICdHZW1pbmknIDogXHJcblx0XHRcdFx0XHRcdHByb3ZpZGVyID09PSAnY2xhdWRlJyA/ICdDbGF1ZGVcdUZGMDhcdTZENEJcdThCRDVcdTRFMkRcdUZGMDknIDogXHJcblx0XHRcdFx0XHRcdHByb3ZpZGVyID09PSAnZGVlcHNlZWsnID8gJ0RlZXBTZWVrIC0gXHU2REYxXHU1RUE2XHU2QzQyXHU3RDIyJyA6IFxyXG5cdFx0XHRcdFx0XHQnRGVlcFNlZWsgLSBcdTcwNkJcdTVDNzFcdTVGMTVcdTY0Q0UnKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlcik7XHJcblx0XHRcdFx0ZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlciA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBcdTUzRUFcdTU3MjhcdTk5OTZcdTZCMjFcdThCQkVcdTdGNkVcdTYyMTYgQVBJIFx1NTczMFx1NTc0MFx1NEUzQVx1N0E3QVx1NjVGNlx1NEY3Rlx1NzUyOFx1OUVEOFx1OEJBNCBBUEkgVVJMXHJcblx0XHRcdFx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyU2V0dGluZ3NbdmFsdWVdLmFwaVVybCkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlclNldHRpbmdzW3ZhbHVlXS5hcGlVcmwgPSBQUk9WSURFUl9DT05GSUdTW3ZhbHVlXS5kZWZhdWx0VXJsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gXHU1M0VBXHU1NzI4XHU5OTk2XHU2QjIxXHU4QkJFXHU3RjZFXHU2MjE2XHU2QTIxXHU1NzhCXHU0RTNBXHU3QTdBXHU2NUY2XHU0RjdGXHU3NTI4XHU5RUQ4XHU4QkE0XHU2QTIxXHU1NzhCXHJcblx0XHRcdFx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyU2V0dGluZ3NbdmFsdWVdLm1vZGVsKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyU2V0dGluZ3NbdmFsdWVdLm1vZGVsID0gUFJPVklERVJfQ09ORklHU1t2YWx1ZV0uZGVmYXVsdE1vZGVsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gXHU2NkY0XHU2NUIwXHU2M0QwXHU0RjlCXHU1NTQ2XHU0RkUxXHU2MDZGXHU2NjNFXHU3OTNBXHJcblx0XHRcdFx0XHRzaG93UHJvdmlkZXJJbmZvKHZhbHVlKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gXHU5MUNEXHU2NUIwXHU2NjNFXHU3OTNBXHU4QkJFXHU3RjZFXHU0RUU1XHU1M0NEXHU2NjIwXHU2NkY0XHU2NUIwXHJcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdBUEkgXHU1QkM2XHU5NEE1JylcclxuXHRcdFx0LnNldERlc2MoJ1x1OEY5M1x1NTE2NVx1NEY2MFx1NzY4NCBBUEkgXHU1QkM2XHU5NEE1JylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdcdThCRjdcdThGOTNcdTUxNjUgQVBJIFx1NUJDNlx1OTRBNScpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXJdLmFwaUtleSlcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlclNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyXS5hcGlLZXkgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0FQSSBcdTU3MzBcdTU3NDAnKVxyXG5cdFx0XHQuc2V0RGVzYygnXHU4RjkzXHU1MTY1IEFQSSBcdTU3MzBcdTU3NDAnKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoUFJPVklERVJfQ09ORklHU1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlcl0uZGVmYXVsdFVybClcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXJTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlcl0uYXBpVXJsKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXJdLmFwaVVybCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdC8vIFx1NEUzQVx1NzI3OVx1NUI5QVx1NjNEMFx1NEY5Qlx1NTU0Nlx1NkRGQlx1NTJBMFx1NjNEMFx1NzkzQVxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyID09PSAnZ2VtaW5pJykge1xyXG5cdFx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBcclxuXHRcdFx0XHR0ZXh0OiAnXHU2Q0U4XHU2MTBGXHVGRjFBR2VtaW5pIEFQSSBVUkwgXHU1RTk0XHU0RUU1IGh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvIFx1NUYwMFx1NTkzNFx1RkYwQ1x1NkEyMVx1NTc4Qlx1NTQwRFx1NzlGMFx1NUMwNlx1ODFFQVx1NTJBOFx1NkRGQlx1NTJBMFx1MzAwMicsIFxyXG5cdFx0XHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgXHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlciA9PT0gJ3ZvbGNhbm8nKSB7XHJcblx0XHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxyXG5cdFx0XHRcdHRleHQ6ICdcdTZDRThcdTYxMEZcdUZGMUFcdTcwNkJcdTVDNzFcdTVGMTVcdTY0Q0UgQVBJIFVSTCBcdTVFOTRcdTRFRTUgaHR0cHM6Ly9hcmsuY24tYmVpamluZy52b2xjZXMuY29tL2FwaS92My9jaGF0L2NvbXBsZXRpb25zIFx1NUYwMFx1NTkzNFx1RkYwQ1x1NkEyMVx1NTc4Qlx1NjcwRFx1NTJBMVx1NTQwRFx1NzlGMFx1NUMwNlx1ODFFQVx1NTJBOFx1NkRGQlx1NTJBMFx1MzAwMicsIFxyXG5cdFx0XHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicgXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnXHU2QTIxXHU1NzhCJylcclxuXHRcdFx0LnNldERlc2MoJ1x1OTAwOVx1NjJFOSBBSSBcdTZBMjFcdTU3OEInKVxyXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG5cdFx0XHRcdGNvbnN0IG1vZGVscyA9IFBST1ZJREVSX0NPTkZJR1NbdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXJdLm1vZGVscztcclxuXHRcdFx0XHRtb2RlbHMuZm9yRWFjaChtb2RlbCA9PiB7XHJcblx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24obW9kZWwsIG1vZGVsKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTVGNTNcdTUyNERcdThCQkVcdTdGNkVcdTc2ODRcdTZBMjFcdTU3OEJcdTRFMERcdTU3MjhcdTUyMTdcdTg4NjhcdTRFMkRcdUZGMENcdTUyMTlcdTZERkJcdTUyQTBcdTVCODNcclxuXHRcdFx0XHRpZiAoIW1vZGVscy5pbmNsdWRlcyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbCkpIHtcclxuXHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWwpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlclNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyXS5tb2RlbCk7XHJcblx0XHRcdFx0ZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlclNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyXS5tb2RlbCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIFx1NEUzQVx1NkJDRlx1NEUyQVx1NjNEMFx1NEY5Qlx1NTU0Nlx1NkRGQlx1NTJBMFx1ODFFQVx1NUI5QVx1NEU0OVx1NkEyMVx1NTc4Qlx1OEY5M1x1NTE2NVxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdcdTgxRUFcdTVCOUFcdTRFNDlcdTZBMjFcdTU3OEInKVxyXG5cdFx0XHQuc2V0RGVzYygnXHU4RjkzXHU1MTY1XHU4MUVBXHU1QjlBXHU0RTQ5XHU2QTIxXHU1NzhCXHU1NDBEXHU3OUYwIChcdTUzRUZcdTkwMDkpJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdcdTgxRUFcdTVCOUFcdTRFNDlcdTZBMjFcdTU3OEJcdTU0MERcdTc5RjAnKVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlclNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyXS5tb2RlbClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlclNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyXS5tb2RlbCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gXHU5MUNEXHU2NUIwXHU1MkEwXHU4RjdEXHU4QkJFXHU3RjZFXHU0RUU1XHU2NkY0XHU2NUIwXHU0RTBCXHU2MkM5XHU1MjE3XHU4ODY4XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHJcblx0fVxyXG59XHJcbiIsICJleHBvcnQgY2xhc3MgUmVxdWVzdEVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBwdWJsaWMgc3RhdHVzOiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSAnUmVxdWVzdEVycm9yJztcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBSZXF1ZXN0RXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvUmVxdWVzdEVycm9yJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQUlTZXJ2aWNlQ29uZmlnIHtcclxuICAgIGFwaUtleTogc3RyaW5nO1xyXG4gICAgYXBpVXJsOiBzdHJpbmc7XHJcbiAgICBtb2RlbDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFJUmVzcG9uc2Uge1xyXG4gICAgY29udGVudDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQUlTZXJ2aWNlIHtcclxuICAgIHByaXZhdGUgY29uZmlnOiBBSVNlcnZpY2VDb25maWc7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBTWVNURU1fUFJPTVBUID0gJ1x1NEY2MFx1NjYyRlx1NEUwMFx1NEUyQVx1NjU4N1x1Njg2M1x1NjgwN1x1N0I3RVx1NzUxRlx1NjIxMFx1NTY2OFx1MzAwMlx1OEJGN1x1NjgzOVx1NjM2RVx1NjU4N1x1Njg2M1x1NTE4NVx1NUJCOVx1NzUxRlx1NjIxMFx1NjcwMFx1NTkxQSAzIFx1NEUyQVx1NzZGOFx1NTE3M1x1NzY4NFx1NjgwN1x1N0I3RVx1MzAwMlx1NTNFQVx1OTcwMFx1OEZENFx1NTZERVx1NjgwN1x1N0I3RVx1RkYwQ1x1NzUyOFx1OTAxN1x1NTNGN1x1NTIwNlx1OTY5NFx1RkYwQ1x1NEUwRFx1ODk4MVx1NTMwNVx1NTQyQlx1NTE3Nlx1NEVENlx1ODlFM1x1OTFDQVx1NjIxNlx1OEJGNFx1NjYwRVx1RkYwQ1x1Nzk4MVx1NkI2Mlx1NjU4N1x1NjcyQ1x1NEUyRFx1NTMwNVx1NTQyQlx1N0E3QVx1NjgzQ1x1MzAwMic7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBUSU1FT1VUID0gMzAwMDA7IC8vIDMwIFx1NzlEMlx1OEQ4NVx1NjVGNlxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgTUFYX1JFVFJJRVMgPSAyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogQUlTZXJ2aWNlQ29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdCh1cmw6IHN0cmluZywgb3B0aW9uczogUmVxdWVzdEluaXQpOiBQcm9taXNlPFJlc3BvbnNlPiB7XHJcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgQUlTZXJ2aWNlLlRJTUVPVVQpO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1ZXN0RXJyb3IoZXJyb3IuZXJyb3I/Lm1lc3NhZ2UgfHwgJ1x1OEJGN1x1NkM0Mlx1NTkzMVx1OEQyNScsIHJlc3BvbnNlLnN0YXR1cyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWVzdEVycm9yKCdcdThCRjdcdTZDNDJcdThEODVcdTY1RjYnLCA0MDgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHJldHJ5UmVxdWVzdChmbjogKCkgPT4gUHJvbWlzZTxSZXNwb25zZT4pOiBQcm9taXNlPFJlc3BvbnNlPiB7XHJcbiAgICAgICAgbGV0IGxhc3RFcnJvcjogRXJyb3I7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gQUlTZXJ2aWNlLk1BWF9SRVRSSUVTOyBpKyspIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbGFzdEVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBSZXF1ZXN0RXJyb3IgJiYgZXJyb3Iuc3RhdHVzID49IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBNYXRoLnBvdygyLCBpKSAqIDEwMDApKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGxhc3RFcnJvcjtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZW5lcmF0ZVRhZ3MoY29udGVudDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlckZyb21VcmwoKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMubWFrZVJlcXVlc3QoXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RnVsbEFwaVVybChwcm92aWRlciksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKHByb3ZpZGVyKSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRoaXMuZ2V0UmVxdWVzdEJvZHkoY29udGVudCwgcHJvdmlkZXIpKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVJlc3BvbnNlKGRhdGEsIHByb3ZpZGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFByb3ZpZGVyRnJvbVVybCgpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5hcGlVcmwuaW5jbHVkZXMoJ2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbScpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnZ2VtaW5pJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICdvcGVuYWknO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RnVsbEFwaVVybChwcm92aWRlcjogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAocHJvdmlkZXIgPT09ICdnZW1pbmknKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZy5hcGlVcmx9JHt0aGlzLmNvbmZpZy5tb2RlbH06Z2VuZXJhdGVDb250ZW50P2tleT0ke3RoaXMuY29uZmlnLmFwaUtleX1gO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcuYXBpVXJsO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0SGVhZGVycyhwcm92aWRlcjogc3RyaW5nKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChwcm92aWRlciAhPT0gJ2dlbWluaScgJiYgdGhpcy5jb25maWcuYXBpS2V5KSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0aGlzLmNvbmZpZy5hcGlLZXl9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBoZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0UmVxdWVzdEJvZHkoY29udGVudDogc3RyaW5nLCBwcm92aWRlcjogc3RyaW5nKTogYW55IHtcclxuICAgICAgICBpZiAocHJvdmlkZXIgPT09ICdnZW1pbmknKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50czogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFydHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGV4dDogQUlTZXJ2aWNlLlNZU1RFTV9QUk9NUFQgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdGV4dDogY29udGVudCB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtb2RlbDogdGhpcy5jb25maWcubW9kZWwsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogQUlTZXJ2aWNlLlNZU1RFTV9QUk9NUFRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwYXJzZVJlc3BvbnNlKGRhdGE6IGFueSwgcHJvdmlkZXI6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgdGFnc1RleHQgPSAnJztcclxuICAgICAgICAgICAgaWYgKHByb3ZpZGVyID09PSAnZ2VtaW5pJykge1xyXG4gICAgICAgICAgICAgICAgdGFnc1RleHQgPSBkYXRhLmNhbmRpZGF0ZXM/LlswXT8uY29udGVudD8ucGFydHM/LlswXT8udGV4dD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFnc1RleHQgPSBkYXRhLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudD8udHJpbSgpIHx8ICcnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGFnc1RleHRcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnLCcpXHJcbiAgICAgICAgICAgICAgICAubWFwKCh0YWc6IHN0cmluZykgPT4gdGFnLnRyaW0oKSlcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHRhZzogc3RyaW5nKSA9PiB0YWcpXHJcbiAgICAgICAgICAgICAgICAubWFwKCh0YWc6IHN0cmluZykgPT4gdGFnLnJlcGxhY2UoL1xccysvZywgJycpKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1ODlFM1x1Njc5MCBBSSBcdTU0Q0RcdTVFOTRcdTU5MzFcdThEMjUnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQThHOzs7QUNBdkcsaUNBQTJCLE1BQU07QUFBQSxFQUNwQyxZQUFZLFNBQXdCLFFBQWdCO0FB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VUFBUSxLQUNmLGVBQWUsaUJBQWlCLEtBQUssT0FBTyxTQUFTLFVBQVUsWUFDL0QsU0FBUyxLQUFLLE9BQU8sU0FBUyxpQkFBaUIsS0FBSyxPQUFPLFNBQVMsVUFBVSxRQUM5RSxTQUFTLENBQU8sVUFBVTtBQUMxQixXQUFLLE9BQU8sU0FBUyxpQkFBaUIsS0FBSyxPQUFPLFNBQVMsVUFBVSxTQUFTO0FBQzlFLFlBQU0sS0FBSyxPQUFPO0FBQUE7QUFJckIsUUFBSSxLQUFLLE9BQU8sU0FBUyxhQUFhLFVBQVU7QUFDL0Msa0JBQVksU0FBUyxPQUFPO0FBQUEsUUFDM0IsTUFBTTtBQUFBLFFBQ04sS0FBSztBQUFBO0FBQUEsZUFFSSxLQUFLLE9BQU8sU0FBUyxhQUFhLFdBQVc7QUFDdkQsa0JBQVksU0FBUyxPQUFPO0FBQUEsUUFDM0IsTUFBTTtBQUFBLFFBQ04sS0FBSztBQUFBO0FBQUE7QUFJUCxRQUFJLHdCQUFRLGFBQ1YsUUFBUSxnQkFDUixRQUFRLGdDQUNSLFlBQVksY0FBWTtBQUN4QixZQUFNLFNBQVMsaUJBQWlCLEtBQUssT0FBTyxTQUFTLFVBQVU7QUFDL0QsYUFBTyxRQUFRLFdBQVM7QUFDdkIsaUJBQVMsVUFBVSxPQUFPO0FBQUE7QUFJM0IsVUFBSSxDQUFDLE9BQU8sU0FBUyxLQUFLLE9BQU8sU0FBUyxRQUFRO0FBQ2pELGlCQUFTLFVBQVUsS0FBSyxPQUFPLFNBQVMsT0FBTyxLQUFLLE9BQU8sU0FBUztBQUFBO0FBR3JFLGVBQVMsU0FBUyxLQUFLLE9BQU8sU0FBUyxpQkFBaUIsS0FBSyxPQUFPLFNBQVMsVUFBVTtBQUN2RixlQUFTLFNBQVMsQ0FBTyxVQUFVO0FBQ2xDLGFBQUssT0FBTyxTQUFTLGlCQUFpQixLQUFLLE9BQU8sU0FBUyxVQUFVLFFBQVE7QUFDN0UsY0FBTSxLQUFLLE9BQU87QUFBQTtBQUFBO0FBS3JCLFFBQUksd0JBQVEsYUFDVixRQUFRLGtDQUNSLFFBQVEseUVBQ1IsUUFBUSxVQUFRLEtBQ2YsZUFBZSw4Q0FDZixTQUFTLEtBQUssT0FBTyxTQUFTLGlCQUFpQixLQUFLLE9BQU8sU0FBUyxVQUFVLE9BQzlFLFNBQVMsQ0FBTyxVQUFVO0FBQzFCLFdBQUssT0FBTyxTQUFTLGlCQUFpQixLQUFLLE9BQU8sU0FBUyxVQUFVLFFBQVE7QUFDN0UsWUFBTSxLQUFLLE9BQU87QUFDbEIsV0FBSztBQUFBO0FBQUE7QUFBQTsiLAogICJuYW1lcyI6IFtdCn0K
